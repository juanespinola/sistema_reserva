import{J as w}from"./Label-CK0f_1Hr.js";import{I as C}from"./InertiaButton-CgApzWcp.js";import{J as j}from"./InputError-Yl9b8Rx0.js";import{J}from"./Checkbox-f85nBy3B.js";import{J as V}from"./Input-loptDDaH.js";import{A as $}from"./axios-BPmCjaAx.js";import{D as N}from"./DisplayMixin-FmpNKeTc.js";import{e as m,b as r,d as i,w as u,j as p,F as k,i as x,r as h,o as d,h as f,t as B,n as v}from"./main-CCoSWOgv.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={name:"AssignPerms",components:{InertiaButton:C,JetLabel:w,JetInputError:j,JetInput:V,JetCheckbox:J},props:{permissions:Object,role:{required:!0,type:Object}},mixins:[N],methods:{async togglePerm(o){$.post(this.route("api.roles.assign-permission",this.role.id),{permission:o}).then(e=>{this.$emit("toggle-success",e.data.message)}).catch(e=>{var t,n;this.$emit("toggle-error",((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||e.message||e)})},async toggleAll(o){const e=this;for(const t in e.permissions){if(!e.permissions.hasOwnProperty(t))return!1;let n=e.permissions[t];await e.togglePermGroup(n,o)}this.displayNotification("success",`All permissions have been ${o?"Assigned.":"Revoked."}`)},async togglePermGroup(o,e){const t=this;for(const n in o){if(!o.hasOwnProperty(n))return!1;let l=o[n];l.checked&&!e?(l.checked=!1,await t.togglePerm(l)):e&&!l.checked&&(l.checked=!0,await t.togglePerm(l))}this.displayNotification("success",`All permissions in the group have been ${e?"Assigned.":"Revoked."}`)}}},D={class:"font-black text-xl mb-2 flex flex-wrap justify-between items-center"},G=r("h2",{class:""},"Assign Permissions",-1),I=r("hr",null,null,-1),E={class:"p-4 mt-2 md:grid grid-cols-2 border rounded"},F={class:"flex flex-wrap"},L={class:"font-black text-xl pb-2"},M={class:""};function U(o,e,t,n,l,a){const g=h("inertia-button"),y=h("jet-checkbox"),A=h("jet-label");return d(),m("div",null,[r("div",D,[G,r("div",null,[i(g,{class:"bg-green-500",type:"button",onClick:e[0]||(e[0]=p(c=>a.toggleAll(!0),["prevent"]))},{default:u(()=>[f("Assign All")]),_:1}),i(g,{class:"bg-red-500 text-white",type:"button",onClick:e[1]||(e[1]=p(c=>a.toggleAll(!1),["prevent"]))},{default:u(()=>[f("Revoke All")]),_:1})])]),I,r("div",E,[(d(!0),m(k,null,x(t.permissions,(c,b)=>(d(),m("div",{key:b,class:"border-b-2 mb-2"},[r("div",F,[r("h3",L,B(b),1),r("div",M,[i(g,{onClick:p(s=>a.togglePermGroup(c,!0),["prevent"]),class:"bg-green-500 py-1 mx-1 text-sm"},{default:u(()=>[f("Assign")]),_:2},1032,["onClick"]),i(g,{onClick:p(s=>a.togglePermGroup(c,!1),["prevent"]),class:"bg-red-500 py-1 mx-1 text-sm"},{default:u(()=>[f("Revoke")]),_:2},1032,["onClick"])])]),(d(!0),m(k,null,x(c,(s,P)=>(d(),m("div",{style:{cursor:"pointer"},key:P,class:"sm:col-span-4 px-10 flex border-b border-gray-100 py-3 items-center my-2 text-gray-600"},[i(y,{onChange:_=>a.togglePerm(s),class:v(["p-2 inline-block",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":!s.checked}]),type:"checkbox",id:s.name,name:s.name,checked:!!s.checked,modelValue:s.checked,"onUpdate:modelValue":_=>s.checked=_},null,8,["onChange","id","name","checked","modelValue","onUpdate:modelValue","class"]),i(A,{style:{cursor:"pointer"},for:s.name,class:v(["text-gray-400 hover:text-gray-600","inline-block font-black text-xl ml-3"]),value:s.title},null,8,["for","value"])]))),128))]))),128))])])}const Y=O(R,[["render",U]]);export{Y as default};

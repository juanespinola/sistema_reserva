import{J as D}from"./JigLayout-C42nlb8G.js";import{J as v}from"./ConfirmationModal-amJhCLdl.js";import{J as j}from"./DialogModal-abULvChW.js";import{I as k}from"./InertiaButton-CgApzWcp.js";import{D as C,J as I,a as J}from"./DtComponent-COTMzt5M.js";import{D as N}from"./DisplayMixin-FmpNKeTc.js";import U from"./ShowForm-BrHyhqVI.js";import{a as h,w as s,r as a,o as u,b as l,d as r,h as n,f as _,e as m,j as p,t as B}from"./main-CCoSWOgv.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CSX2-Sgs.js";import"./JigDd-DtnlwjZF.js";const S={name:"Index",components:{DtComponent:C,JigToggle:I,InertiaButton:k,JetConfirmationModal:v,JetDialogModal:j,JigModal:J,JigLayout:D,ShowUsersForm:U},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"users-dt",tableParams:{},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1}},mixins:[N],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.users.dt")).href}},methods:{showModel(e){axios.get(route("api.users.show",e)).then(t=>{this.currentModel=t.data.payload,this.showModal=!0})},editModel(e){this.$inertia.visit(this.route("admin.users.edit",e.id))},confirmDeletion(e){this.currentModel=e,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const e=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.users.destroy",e.currentModel),{onFinish:t=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tableId)},onError:t=>{console.log(t),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,t){console.log(e),axios.put(route("api.users.update",t.id),{enabled:e}).then(d=>{this.displayNotification("success",d.data.message),this.$refreshDt(this.tableId)})}}},E={class:"flex flex-wrap items-center justify-between w-full px-4"},V=l("i",{class:"fas fa-arrow-left"},null,-1),L={class:"flex gap-x-2"},T=l("i",{class:"fas fa-plus"},null,-1),z=l("i",{class:"fas fa-redo"},null,-1),F={key:0,class:"flex flex-wrap px-4"},P={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},R=l("h3",{class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},[l("i",{class:"mr-2 fas fa-bars"}),n(" List of All Users")],-1),Y={class:"p-4"},O=l("div",null,"Are you sure you want to delete this record?",-1),q={class:"flex justify-end gap-x-2"},G={key:0},H={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function K(e,t,d,Q,o,i){const w=a("inertia-link"),c=a("inertia-button"),g=a("dt-component"),b=a("jet-confirmation-modal"),x=a("show-users-form"),M=a("jig-modal"),y=a("jig-layout");return u(),h(y,null,{header:s(()=>[l("div",E,[r(w,{href:e.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:s(()=>[V,n(" Back")]),_:1},8,["href"]),l("div",L,[d.can.create?(u(),h(c,{key:0,href:e.route("admin.users.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:s(()=>[T,n(" New User")]),_:1},8,["href"])):_("",!0),r(c,{onClick:t[0]||(t[0]=f=>i.$refreshDt(o.tableId)),classes:"bg-indigo-100 hover:bg-green-200 text-indigo"},{default:s(()=>[z,n(" Refresh")]),_:1})])])]),default:s(()=>[d.can.viewAny?(u(),m("div",F,[l("div",P,[R,l("div",Y,[r(g,{"table-id":o.tableId,"ajax-url":i.ajaxUrl,columns:d.columns,"ajax-params":o.tableParams,onShowModel:i.showModel,onEditModel:i.editModel,onDeleteModel:i.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),r(b,{title:"Confirm Deletion",show:o.confirmDelete},{content:s(()=>[O]),footer:s(()=>[l("div",q,[r(c,{as:"button",type:"button",onClick:p(i.cancelDelete,["stop"]),class:"bg-red-500"},{default:s(()=>[n("Cancel")]),_:1},8,["onClick"]),r(c,{as:"button",type:"button",onClick:p(i.deleteModel,["prevent"]),class:"bg-green-500"},{default:s(()=>[n("Yes, Delete")]),_:1},8,["onClick"])])]),_:1},8,["show"]),o.showModal&&o.currentModel?(u(),m("div",G,[r(M,{show:o.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:t[2]||(t[2]=f=>{o.currentModel=null,o.showModal=!1})},{title:s(()=>[n("Show User #"+B(o.currentModel.id),1)]),footer:s(()=>[r(c,{class:"px-4 text-white bg-primary",onClick:t[1]||(t[1]=f=>{o.showModal=!1,o.currentModel=null})},{default:s(()=>[n("Close")]),_:1})]),default:s(()=>[r(x,{model:o.currentModel},null,8,["model"])]),_:1},8,["show"])])):_("",!0)])])):(u(),m("div",H," You are not authorized to view a list of Users "))]),_:1})}const ie=A(S,[["render",K]]);export{ie as default};

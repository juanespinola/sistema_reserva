import{A as N}from"./axios-BPmCjaAx.js";import{$ as R,a0 as M,y as P,W as X,l as A,N as U}from"./main-CCoSWOgv.js";function H(e,t){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>e.apply(this,i),t)}}function c(e,t){return document.dispatchEvent(new CustomEvent(`inertia:${e}`,t))}var J=e=>c("before",{cancelable:!0,detail:{visit:e}}),K=e=>c("error",{detail:{errors:e}}),z=e=>c("exception",{cancelable:!0,detail:{exception:e}}),O=e=>c("finish",{detail:{visit:e}}),_=e=>c("invalid",{cancelable:!0,detail:{response:e}}),v=e=>c("navigate",{detail:{page:e}}),G=e=>c("progress",{detail:{progress:e}}),Q=e=>c("start",{detail:{visit:e}}),Z=e=>c("success",{detail:{page:e}});function b(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some(t=>b(t))||typeof e=="object"&&e!==null&&Object.values(e).some(t=>b(t))}function $(e,t=new FormData,r=null){e=e||{};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&j(t,B(r,i),e[i]);return t}function B(e,t){return e?e+"["+t+"]":t}function j(e,t,r){if(Array.isArray(r))return Array.from(r.keys()).forEach(i=>j(e,B(t,i.toString()),r[i]));if(r instanceof Date)return e.append(t,r.toISOString());if(r instanceof File)return e.append(t,r,r.name);if(r instanceof Blob)return e.append(t,r);if(typeof r=="boolean")return e.append(t,r?"1":"0");if(typeof r=="string")return e.append(t,r);if(typeof r=="number")return e.append(t,`${r}`);if(r==null)return e.append(t,"");$(r,e,t)}var Y={modal:null,listener:null,show(e){typeof e=="object"&&(e=`All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(e)}`);let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach(i=>i.setAttribute("target","_top")),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",()=>this.hide());let r=document.createElement("iframe");if(r.style.backgroundColor="white",r.style.borderRadius="5px",r.style.width="100%",r.style.height="100%",this.modal.appendChild(r),document.body.prepend(this.modal),document.body.style.overflow="hidden",!r.contentWindow)throw new Error("iframe not yet ready.");r.contentWindow.document.open(),r.contentWindow.document.write(t.outerHTML),r.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape(e){e.keyCode===27&&this.hide()}};function g(e){return new URL(e.toString(),window.location.toString())}function q(e,t,r,i="brackets"){let n=/^https?:\/\//.test(t.toString()),a=n||t.toString().startsWith("/"),d=!a&&!t.toString().startsWith("#")&&!t.toString().startsWith("?"),p=t.toString().includes("?")||e==="get"&&Object.keys(r).length,h=t.toString().includes("#"),l=new URL(t.toString(),"http://localhost");return e==="get"&&Object.keys(r).length&&(l.search=R.stringify(M(R.parse(l.search,{ignoreQueryPrefix:!0}),r),{encodeValuesOnly:!0,arrayFormat:i}),r={}),[[n?`${l.protocol}//${l.host}`:"",a?l.pathname:"",d?l.pathname.substring(1):"",p?l.search:"",h?l.hash:""].join(""),r]}function y(e){return e=new URL(e.href),e.hash="",e}var x=typeof window>"u",ee=class{constructor(){this.visitId=null}init({initialPage:e,resolveComponent:t,swapComponent:r}){this.page=e,this.resolveComponent=t,this.swapComponent=r,this.setNavigationType(),this.clearRememberedStateOnReload(),this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()}setNavigationType(){this.navigationType=window.performance&&window.performance.getEntriesByType("navigation").length>0?window.performance.getEntriesByType("navigation")[0].type:"navigate"}clearRememberedStateOnReload(){var e;this.navigationType==="reload"&&((e=window.history.state)!=null&&e.rememberedState)&&delete window.history.state.rememberedState}handleInitialPageVisit(e){this.page.url+=window.location.hash,this.setPage(e,{preserveState:!0}).then(()=>v(e))}setupEventListeners(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",H(this.handleScrollEvent.bind(this),100),!0)}scrollRegions(){return document.querySelectorAll("[scroll-region]")}handleScrollEvent(e){typeof e.target.hasAttribute=="function"&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()}saveScrollPositions(){this.replaceState({...this.page,scrollRegions:Array.from(this.scrollRegions()).map(e=>({top:e.scrollTop,left:e.scrollLeft}))})}resetScrollPositions(){window.scrollTo(0,0),this.scrollRegions().forEach(e=>{typeof e.scrollTo=="function"?e.scrollTo(0,0):(e.scrollTop=0,e.scrollLeft=0)}),this.saveScrollPositions(),window.location.hash&&setTimeout(()=>{var e;return(e=document.getElementById(window.location.hash.slice(1)))==null?void 0:e.scrollIntoView()})}restoreScrollPositions(){this.page.scrollRegions&&this.scrollRegions().forEach((e,t)=>{let r=this.page.scrollRegions[t];if(r)typeof e.scrollTo=="function"?e.scrollTo(r.left,r.top):(e.scrollTop=r.top,e.scrollLeft=r.left);else return})}isBackForwardVisit(){return window.history.state&&this.navigationType==="back_forward"}handleBackForwardVisit(e){window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then(()=>{this.restoreScrollPositions(),v(e)})}locationVisit(e,t){try{let r={preserveScroll:t};window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify(r)),window.location.href=e.href,y(window.location).href===y(e).href&&window.location.reload()}catch{return!1}}isLocationVisit(){try{return window.sessionStorage.getItem("inertiaLocationVisit")!==null}catch{return!1}}handleLocationVisit(e){var r,i;let t=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=((r=window.history.state)==null?void 0:r.rememberedState)??{},e.scrollRegions=((i=window.history.state)==null?void 0:i.scrollRegions)??[],this.setPage(e,{preserveScroll:t.preserveScroll,preserveState:!0}).then(()=>{t.preserveScroll&&this.restoreScrollPositions(),v(e)})}isLocationVisitResponse(e){return!!(e&&e.status===409&&e.headers["x-inertia-location"])}isInertiaResponse(e){return!!(e!=null&&e.headers["x-inertia"])}createVisitId(){return this.visitId={},this.visitId}cancelVisit(e,{cancelled:t=!1,interrupted:r=!1}){e&&!e.completed&&!e.cancelled&&!e.interrupted&&(e.cancelToken.abort(),e.onCancel(),e.completed=!1,e.cancelled=t,e.interrupted=r,O(e),e.onFinish(e))}finishVisit(e){!e.cancelled&&!e.interrupted&&(e.completed=!0,e.cancelled=!1,e.interrupted=!1,O(e),e.onFinish(e))}resolvePreserveOption(e,t){return typeof e=="function"?e(t):e==="errors"?Object.keys(t.props.errors||{}).length>0:e}cancel(){this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}visit(e,{method:t="get",data:r={},replace:i=!1,preserveScroll:n=!1,preserveState:a=!1,only:d=[],headers:p={},errorBag:h="",forceFormData:l=!1,onCancelToken:T=()=>{},onBefore:V=()=>{},onStart:k=()=>{},onProgress:C=()=>{},onFinish:W=()=>{},onCancel:D=()=>{},onSuccess:E=()=>{},onError:L=()=>{},queryStringArrayFormat:S="brackets"}={}){let m=typeof e=="string"?g(e):e;if((b(r)||l)&&!(r instanceof FormData)&&(r=$(r)),!(r instanceof FormData)){let[s,o]=q(t,m,r,S);m=g(s),r=o}let f={url:m,method:t,data:r,replace:i,preserveScroll:n,preserveState:a,only:d,headers:p,errorBag:h,forceFormData:l,queryStringArrayFormat:S,cancelled:!1,completed:!1,interrupted:!1};if(V(f)===!1||!J(f))return;this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();let I=this.createVisitId();this.activeVisit={...f,onCancelToken:T,onBefore:V,onStart:k,onProgress:C,onFinish:W,onCancel:D,onSuccess:E,onError:L,queryStringArrayFormat:S,cancelToken:new AbortController},T({cancel:()=>{this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}}),Q(f),k(f),N({method:t,url:y(m).href,data:t==="get"?{}:r,params:t==="get"?r:{},signal:this.activeVisit.cancelToken.signal,headers:{...p,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0,...d.length?{"X-Inertia-Partial-Component":this.page.component,"X-Inertia-Partial-Data":d.join(",")}:{},...h&&h.length?{"X-Inertia-Error-Bag":h}:{},...this.page.version?{"X-Inertia-Version":this.page.version}:{}},onUploadProgress:s=>{r instanceof FormData&&(s.percentage=s.progress?Math.round(s.progress*100):0,G(s),C(s))}}).then(s=>{var F;if(!this.isInertiaResponse(s))return Promise.reject({response:s});let o=s.data;d.length&&o.component===this.page.component&&(o.props={...this.page.props,...o.props}),n=this.resolvePreserveOption(n,o),a=this.resolvePreserveOption(a,o),a&&((F=window.history.state)!=null&&F.rememberedState)&&o.component===this.page.component&&(o.rememberedState=window.history.state.rememberedState);let u=m,w=g(o.url);return u.hash&&!w.hash&&y(u).href===w.href&&(w.hash=u.hash,o.url=w.href),this.setPage(o,{visitId:I,replace:i,preserveScroll:n,preserveState:a})}).then(()=>{let s=this.page.props.errors||{};if(Object.keys(s).length>0){let o=h?s[h]?s[h]:{}:s;return K(o),L(o)}return Z(this.page),E(this.page)}).catch(s=>{if(this.isInertiaResponse(s.response))return this.setPage(s.response.data,{visitId:I});if(this.isLocationVisitResponse(s.response)){let o=g(s.response.headers["x-inertia-location"]),u=m;u.hash&&!o.hash&&y(u).href===o.href&&(o.hash=u.hash),this.locationVisit(o,n===!0)}else if(s.response)_(s.response)&&Y.show(s.response.data);else return Promise.reject(s)}).then(()=>{this.activeVisit&&this.finishVisit(this.activeVisit)}).catch(s=>{if(!N.isCancel(s)){let o=z(s);if(this.activeVisit&&this.finishVisit(this.activeVisit),o)return Promise.reject(s)}})}setPage(e,{visitId:t=this.createVisitId(),replace:r=!1,preserveScroll:i=!1,preserveState:n=!1}={}){return Promise.resolve(this.resolveComponent(e.component)).then(a=>{t===this.visitId&&(e.scrollRegions=e.scrollRegions||[],e.rememberedState=e.rememberedState||{},r=r||g(e.url).href===window.location.href,r?this.replaceState(e):this.pushState(e),this.swapComponent({component:a,page:e,preserveState:n}).then(()=>{i||this.resetScrollPositions(),r||v(e)}))})}pushState(e){this.page=e,window.history.pushState(e,"",e.url)}replaceState(e){this.page=e,window.history.replaceState(e,"",e.url)}handlePopstateEvent(e){if(e.state!==null){let t=e.state,r=this.createVisitId();Promise.resolve(this.resolveComponent(t.component)).then(i=>{r===this.visitId&&(this.page=t,this.swapComponent({component:i,page:t,preserveState:!1}).then(()=>{this.restoreScrollPositions(),v(t)}))})}else{let t=g(this.page.url);t.hash=window.location.hash,this.replaceState({...this.page,url:t.href}),this.resetScrollPositions()}}get(e,t={},r={}){return this.visit(e,{...r,method:"get",data:t})}reload(e={}){return this.visit(window.location.href,{...e,preserveScroll:!0,preserveState:!0})}replace(e,t={}){return console.warn(`Inertia.replace() has been deprecated and will be removed in a future release. Please use Inertia.${t.method??"get"}() instead.`),this.visit(e,{preserveState:!0,...t,replace:!0})}post(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"post",data:t})}put(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"put",data:t})}patch(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"patch",data:t})}delete(e,t={}){return this.visit(e,{preserveState:!0,...t,method:"delete"})}remember(e,t="default"){var r;x||this.replaceState({...this.page,rememberedState:{...(r=this.page)==null?void 0:r.rememberedState,[t]:e}})}restore(e="default"){var t,r;if(!x)return(r=(t=window.history.state)==null?void 0:t.rememberedState)==null?void 0:r[e]}on(e,t){let r=i=>{let n=t(i);i.cancelable&&!i.defaultPrevented&&n===!1&&i.preventDefault()};return document.addEventListener(`inertia:${e}`,r),()=>document.removeEventListener(`inertia:${e}`,r)}};function te(e){let t=e.currentTarget.tagName.toLowerCase()==="a";return!(e.target&&(e==null?void 0:e.target).isContentEditable||e.defaultPrevented||t&&e.which>1||t&&e.altKey||t&&e.ctrlKey||t&&e.metaKey||t&&e.shiftKey)}var re=new ee;P(null);P(null);X(null);P(null);var ie=A({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let t=Object.keys(e.props).reduce((r,i)=>{let n=e.props[i];return["key","head-key"].includes(i)?r:n===""?r+` ${i}`:r+` ${i}="${n}"`},"");return`<${e.type}${t}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((t,r)=>t+this.renderTag(r),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e)||this.isCommentNode(e))return"";let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.type}>`),t},addTitleElement(e){return this.title&&!e.find(t=>t.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(t=>this.resolveNode(t)).map(t=>this.renderTag(t)).filter(t=>t))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(t=>this.resolveNode(t)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),ae=ie,se=A({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"}},setup(e,{slots:t,attrs:r}){return()=>{let i=e.as.toLowerCase(),n=e.method.toLowerCase(),[a,d]=q(n,e.href||"",e.data,e.queryStringArrayFormat);return i==="a"&&n!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${a}" method="${n}" as="button">...</Link>`),U(e.as,{...r,...i==="a"?{href:a}:{},onClick:p=>{te(p)&&(p.preventDefault(),re.visit(a,{data:d,method:n,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??n!=="get",only:e.only,headers:e.headers,onCancelToken:r.onCancelToken||(()=>({})),onBefore:r.onBefore||(()=>({})),onStart:r.onStart||(()=>({})),onProgress:r.onProgress||(()=>({})),onFinish:r.onFinish||(()=>({})),onCancel:r.onCancel||(()=>({})),onSuccess:r.onSuccess||(()=>({})),onError:r.onError||(()=>({}))}))}},t)}}}),le=se;export{ae as Z,le as i};
